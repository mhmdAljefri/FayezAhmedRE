# Migration `20201206185245`

This migration has been generated by Mohammed at 12/6/2020, 9:52:45 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
CREATE TYPE "public"."PAYMENT_TYPES" AS ENUM ('cash', 'installment')

ALTER TYPE "REQUEST_TYPES" ADD VALUE 'consultings'

ALTER TYPE "STATUS" ADD VALUE 'resell';
ALTER TYPE "STATUS" ADD VALUE 'installment';
ALTER TYPE "STATUS" ADD VALUE 'compatible_installment';
ALTER TYPE "STATUS" ADD VALUE 'ocean_view';
ALTER TYPE "STATUS" ADD VALUE 'granted_by_gov'

ALTER TABLE "public"."Country" ADD COLUMN "dontMissitGallery" text []  ,
ADD COLUMN "getInspiredGallery" text []  ,
ADD COLUMN "exploreGallery" text []  

ALTER TABLE "public"."Project" ADD COLUMN "paymentType" "PAYMENT_TYPES"  NOT NULL DEFAULT E'cash',
ADD COLUMN "installmentPlan" jsonb   ,
ADD COLUMN "locationText" text   ,
ADD COLUMN "propertyTypeId" integer   

ALTER TABLE "public"."RoomWithPrice" ADD COLUMN "value" SERIAL

CREATE TABLE "public"."PropertyType" (
"id" SERIAL,
"createdAt" timestamp(3)   NOT NULL DEFAULT CURRENT_TIMESTAMP,
"updatedAt" timestamp(3)   NOT NULL ,
"name" text   NOT NULL ,
PRIMARY KEY ("id")
)

ALTER TABLE "public"."Project" ADD FOREIGN KEY ("propertyTypeId")REFERENCES "public"."PropertyType"("id") ON DELETE SET NULL ON UPDATE CASCADE
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration ..20201206185245
--- datamodel.dml
+++ datamodel.dml
@@ -1,0 +1,208 @@
+// This is your Prisma schema file,
+// learn more about it in the docs: https://pris.ly/d/prisma-schema
+
+datasource db {
+  provider = "postgresql"
+  url = "***"
+}
+
+generator client {
+  provider = "prisma-client-js"
+}
+
+// --------------------------------------
+
+model User {
+  id             Int       @default(autoincrement()) @id
+  createdAt      DateTime  @default(now())
+  updatedAt      DateTime  @updatedAt
+  name           String?
+  email          String    @unique
+  hashedPassword String?
+  role           String    @default("user")
+  sessions       Session[]
+}
+
+model Session {
+  id                 Int       @default(autoincrement()) @id
+  createdAt          DateTime  @default(now())
+  updatedAt          DateTime  @updatedAt
+  expiresAt          DateTime?
+  handle             String    @unique
+  user               User?     @relation(fields: [userId], references: [id])
+  userId             Int?
+  hashedSessionToken String?
+  antiCSRFToken      String?
+  publicData         String?
+  privateData        String?
+}
+
+model Project {
+  id                        Int      @default(autoincrement()) @id
+  createdAt                 DateTime @default(now())
+  updatedAt                 DateTime @updatedAt
+
+  name                      String
+  subTitle                  String
+  details                   String
+  status                    STATUS
+  image                     String?
+  gallery                   String[]
+  floorplan                 String[]
+  features                  String[]
+  brochure                  String?
+  paymentType               PAYMENT_TYPES @default(cash)
+  constructingUpdateVideo   String?
+  constructingUpdatePrview  String?
+  nearBy                    Json?
+  roomsWithPrices           RoomWithPrice[]
+  location                  Json?
+  installmentPlan           Json?
+  locationText              String?
+  country                   Country  @relation(fields: [countryId], references: [id])
+  countryId                 Int
+  propertyType              PropertyType? @relation(fields: [propertyTypeId], references: [id])
+  propertyTypeId            Int?
+} 
+
+model PropertyType {
+    id             Int      @default(autoincrement()) @id
+    createdAt      DateTime @default(now())
+    updatedAt      DateTime @updatedAt
+    name           String
+
+    projects       Project[]
+}
+
+model RoomWithPrice {
+    id             Int      @default(autoincrement()) @id
+    createdAt      DateTime @default(now())
+    updatedAt      DateTime @updatedAt
+    room           String
+    value          Int      @default(autoincrement())
+
+    price          String
+    priceQatar     String
+    priceTurkey    String
+    priceKSA       String
+    priceKuwait    String
+    priceUAE       String
+    priceOman      String
+}
+
+model Country {
+  id                    Int      @default(autoincrement()) @id
+  createdAt             DateTime @default(now())
+  updatedAt             DateTime @updatedAt
+
+  name                  String   @unique
+  nameEN                String?
+  image                 String
+  gallery               Json?
+  isTurkey              Boolean @default(false)
+  rooms                 String[]
+
+  dontMissitGallery     String[]
+  getInspiredGallery    String[]
+  exploreGallery        String[]
+  cities                City[]
+  projects              Project[]
+}
+
+model City {
+  id        Int      @default(autoincrement()) @id
+  createdAt DateTime @default(now())
+  updatedAt DateTime @updatedAt
+
+  name      String   @unique
+  latituade String
+  longitude String
+
+  country   Country  @relation(fields: [countryId], references: [id])
+  countryId Int      
+}
+
+model Furnish {
+  id                Int      @default(autoincrement()) @id
+  createdAt         DateTime @default(now())
+  updatedAt         DateTime @updatedAt
+
+  name              String
+  description       String
+  image             String
+  price             String
+
+
+  furnishCategory   FurnishCategory  @relation(fields: [furnishCategoryId], references: [id])
+  furnishCategoryId Int     
+}
+
+model FurnishCategory {
+  id          Int      @default(autoincrement()) @id
+  createdAt   DateTime @default(now())
+  updatedAt   DateTime @updatedAt
+
+  name        String @unique
+  image       String
+  furnishes   Furnish[]
+}
+
+enum STATUS {
+  completed
+  inprogress
+  resell
+  installment
+  compatible_installment
+  ocean_view
+  granted_by_gov
+}
+enum PAYMENT_TYPES {
+  cash
+  installment
+}
+
+model Feature {
+  id        Int      @default(autoincrement()) @id
+  createdAt DateTime @default(now())
+  updatedAt DateTime @updatedAt
+
+  name      String
+  image     String
+}
+
+model Partner {
+  id        Int      @default(autoincrement()) @id
+  createdAt DateTime @default(now())
+  updatedAt DateTime @updatedAt
+
+  name      String
+  image     String
+}
+
+model Carousel {
+  id        Int      @default(autoincrement()) @id
+  createdAt DateTime @default(now())
+  updatedAt DateTime @updatedAt
+
+  position  Int      @unique @default(autoincrement())
+  title     String
+  text      String
+  url       String
+  image     String
+}
+
+model Request {
+  id        Int      @default(autoincrement()) @id
+  createdAt DateTime @default(now())
+  updatedAt DateTime @updatedAt
+
+  type      REQUEST_TYPES @default(flights)
+  data      Json
+}
+
+enum REQUEST_TYPES {
+  flights
+  hotels
+  cars
+  consultings
+}
```


