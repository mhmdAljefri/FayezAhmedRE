# Migration `20210319112230`

This migration has been generated by mhmdAljefri at 3/19/2021, 2:22:30 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
CREATE TABLE "_ProjectToUser" (
    "A" INTEGER NOT NULL,
    "B" INTEGER NOT NULL
)

CREATE TABLE "_OfferToUser" (
    "A" INTEGER NOT NULL,
    "B" INTEGER NOT NULL
)

CREATE UNIQUE INDEX "_ProjectToUser_AB_unique" ON "_ProjectToUser"("A", "B")

CREATE INDEX "_ProjectToUser_B_index" ON "_ProjectToUser"("B")

CREATE UNIQUE INDEX "_OfferToUser_AB_unique" ON "_OfferToUser"("A", "B")

CREATE INDEX "_OfferToUser_B_index" ON "_OfferToUser"("B")

ALTER TABLE "_ProjectToUser" ADD FOREIGN KEY("A")REFERENCES "Project"("id") ON DELETE CASCADE ON UPDATE CASCADE

ALTER TABLE "_ProjectToUser" ADD FOREIGN KEY("B")REFERENCES "User"("id") ON DELETE CASCADE ON UPDATE CASCADE

ALTER TABLE "_OfferToUser" ADD FOREIGN KEY("A")REFERENCES "Offer"("id") ON DELETE CASCADE ON UPDATE CASCADE

ALTER TABLE "_OfferToUser" ADD FOREIGN KEY("B")REFERENCES "User"("id") ON DELETE CASCADE ON UPDATE CASCADE
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20210317090246..20210319112230
--- datamodel.dml
+++ datamodel.dml
@@ -2,9 +2,9 @@
 // learn more about it in the docs: https://pris.ly/d/prisma-schema
 datasource db {
   provider = "postgresql"
-  url = "***"
+  url = "***"
 }
 generator client {
   provider = "prisma-client-js"
@@ -20,8 +20,10 @@
   email          String    @unique
   hashedPassword String?
   role           String    @default("user")
   sessions       Session[]
+  projects       Project[]
+  offers         Offer[]
 }
 model Session {
   id                 Int       @default(autoincrement()) @id
@@ -74,8 +76,10 @@
   location                  Json?
   installmentPlan           Json?
   locationText              String?
   oprationCompanies         Json?
+
+  users                     User[]
 }
 model OprationCompanyPage {
   id                        Int             @default(autoincrement()) @id
@@ -116,8 +120,10 @@
   constructingUpdateVideo   String?
   constructingUpdatePrview  String?
   location                  Json?
   installmentPlan           Json?
+
+  users                     User[]
 } 
 model PropertyType {
     id             Int      @default(autoincrement()) @id
```


